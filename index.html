<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Book A Table - Dynamic JSON Content</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    :root {
      --primary-color: #4CAF50;
      --background-color: #f5f7fa;
      --text-color: #333;
      --section-title-color: var(--primary-color);
      --text-muted: #555;
    }

    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: var(--background-color);
      color: var(--text-color);
      scroll-behavior: smooth;
    }
    a {
      color: inherit;
      text-decoration: none;
      cursor: pointer;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
      z-index: 1000;
    }
    .logo {
      font-weight: 600;
      font-size: 24px;
      color: var(--primary-color);
      letter-spacing: 1px;
    }
    nav {
      display: flex;
      align-items: center;
      gap: 25px;
    }
    nav a {
      font-weight: 600;
      text-transform: uppercase;
      font-size: 14px;
      transition: color 0.3s ease, transform 0.2s ease;
    }
    nav a:hover,
    nav a:focus {
      color: var(--primary-color);
      transform: scale(1.1);
      outline: none;
    }
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      width: 24px;
      height: 18px;
      justify-content: space-between;
      transition: transform 0.3s ease;
    }
    .hamburger span {
      height: 3px;
      width: 100%;
      background-color: var(--primary-color);
      border-radius: 2px;
      transition: background-color 0.3s ease, transform 0.3s ease;
      display: block;
      position: relative;
    }
    .hamburger[aria-expanded="true"] span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    .hamburger[aria-expanded="true"] span:nth-child(2) {
      opacity: 0;
    }
    .hamburger[aria-expanded="true"] span:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }
    @media (max-width: 768px) {
      nav {
        position: fixed;
        flex-direction: column;
        background: white;
        top: 60px;
        right: -100%;
        width: 200px;
        height: calc(100% - 60px);
        padding-top: 20px;
        gap: 20px;
        transition: right 0.3s ease;
        box-shadow: -4px 0 8px rgba(0,0,0,0.1);
      }
      nav.open {
        right: 0;
      }
      .hamburger {
        display: flex;
      }
    }

    section {
      padding: 100px 20px 60px;
      max-width: 1200px;
      margin: 0 auto;
      scroll-margin-top: 80px;

      /* Animate fade-in and slide-up */
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    h2 {
      text-align: center;
      margin-bottom: 40px;
      font-weight: 600;
      font-size: 32px;
      color: var(--section-title-color);
    }
    p {
      max-width: 700px;
      margin: 0 auto 20px;
      line-height: 1.6;
      font-size: 16px;
      color: var(--text-muted);
    }

    /* Hero Section */
    .hero {
      position: relative;
      height: 90vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 0 20px;
      color: white;
      background-size: cover;
      background-position: center center;
    }
    .hero-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
      z-index: 0;
    }
    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 600px;
    }
    .hero h1 {
      font-size: 48px;
      margin-bottom: 20px;
      font-weight: 700;
    }
    .hero button {
      background-color: var(--primary-color);
      border: none;
      color: white;
      font-weight: 600;
      padding: 14px 30px;
      border-radius: 6px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      margin-top: 10px;
      animation: bounce 3s ease-in-out infinite;
    }
    .hero button:hover,
    .hero button:focus {
      background-color: #45a049;
      transform: scale(1.05);
      outline: none;
    }

    /* Bounce Animation */
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    /* About Section */
    .about-content {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      align-items: center;
      justify-content: center;
    }
    .about-text {
      flex: 1 1 320px;
      max-width: 600px;
    }
    .about-image {
      flex: 1 1 320px;
      max-width: 500px;
    }
    .about-image img {
      width: 100%;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    .about-image img:hover,
    .about-image img:focus {
      transform: scale(1.05);
      outline: none;
    }

    /* Menu Section */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(280px, 1fr));
      gap: 25px;
      max-width: 1000px;
      margin: 0 auto;
    }
    .menu-item {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
    }
    .menu-item:hover,
    .menu-item:focus-within {
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
      transform: translateY(-6px);
      outline: none;
    }
    .menu-item img {
      width: 100%;
      object-fit: cover;
      height: 180px;
      border-bottom: 1px solid #eee;
      transition: transform 0.4s ease;
      will-change: transform;
    }
    .menu-item:hover img,
    .menu-item:focus-within img {
      transform: scale(1.05);
    }
    .menu-content {
      padding: 20px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .menu-content h3 {
      margin: 0 0 12px;
      color: var(--primary-color);
      font-size: 22px;
    }
    .menu-content p {
      margin: 0 0 15px;
      color: #666;
      flex-grow: 1;
      font-size: 15px;
    }
    .menu-content .price {
      font-weight: 700;
      color: #333;
      font-size: 18px;
      text-align: right;
    }

    /* Testimonials Section */
    .testimonials {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }
    .testimonial-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 25px 30px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      cursor: default;
    }
    .testimonial-card:hover, .testimonial-card:focus-within {
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
      transform: translateY(-6px);
      outline: none;
    }
    .testimonial-text {
      font-style: italic;
      color: #555;
      font-size: 16px;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    .testimonial-author {
      font-weight: 700;
      color: var(--primary-color);
      align-self: flex-end;
      font-size: 14px;
    }

    /* Contact Section */
    .contact-info {
      text-align: center;
      margin-bottom: 40px;
      font-size: 16px;
      color: #444;
      line-height: 1.6;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    .contact-form {
      max-width: 420px;
      margin: 0 auto;
      background: white;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    .contact-form label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
      font-size: 14px;
    }
    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 12px 15px;
      font-size: 15px;
      border-radius: 6px;
      border: 1.5px solid #ccc;
      margin-bottom: 20px;
      resize: vertical;
      transition: border-color 0.3s ease;
    }
    .contact-form input:focus,
    .contact-form textarea:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    .contact-form button {
      width: 100%;
      padding: 14px 0;
      font-weight: 600;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background-color: var(--primary-color);
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .contact-form button:hover,
    .contact-form button:focus {
      background-color: #45a049;
      outline: none;
      transform: scale(1.05);
    }
    .contact-confirmation {
      margin-top: 15px;
      padding: 12px;
      font-weight: 600;
      border-radius: 6px;
      display: none;
      font-size: 15px;
      text-align: center;
    }
    .contact-success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .contact-error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    /* Footer */
    footer {
      background: #333;
      color: #ccc;
      text-align: center;
      padding: 25px 15px;
      font-size: 14px;
      margin-top: 60px;
    }
    .social-links {
      margin-bottom: 12px;
    }
    .social-links a {
      margin: 0 8px;
      color: var(--primary-color);
      font-size: 20px;
      transition: color 0.3s ease, transform 0.2s ease;
      display: inline-block;
    }
    .social-links a:hover,
    .social-links a:focus {
      color: #2e7d32;
      transform: scale(1.2);
      outline: none;
    }

    /* Visually hidden for aria-live error messages */
    .visually-hidden {
      position: absolute !important;
      height: 1px; 
      width: 1px; 
      overflow: hidden;
      clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo" tabindex="0" id="logoTitle">Book A Table</div>
    <nav id="navbar" aria-label="Primary navigation"></nav>
    <div class="hamburger" aria-label="Menu" role="button" tabindex="0" aria-expanded="false" aria-controls="navbar">
      <span></span><span></span><span></span>
    </div>
  </header>

  <main id="mainContent"></main>

  <footer>
    <div class="social-links" aria-label="Social media links"></div>
    <div id="footerCopyright"></div>
  </footer>

  <script>
    // Apply colors to CSS variables
    function applyColors(colors) {
      const root = document.documentElement;
      root.style.setProperty('--primary-color', colors.primary);
      root.style.setProperty('--background-color', colors.background);
      root.style.setProperty('--text-color', colors.text);
      root.style.setProperty('--section-title-color', colors.sectionTitle);
      root.style.setProperty('--text-muted', colors.textMuted);
    }

    // Build Navigation markup
    function buildNav(navLinks) {
      const nav = document.getElementById('navbar');
      navLinks.forEach(({id, label}) => {
        const a = document.createElement('a');
        a.href = `#${id}`;
        a.textContent = label;
        nav.appendChild(a);
      });
      // Add hamburger events
      const hamburger = document.querySelector('.hamburger');
      hamburger.addEventListener('click', () => {
        const expanded = hamburger.getAttribute('aria-expanded') === 'true' || false;
        hamburger.setAttribute('aria-expanded', !expanded);
        nav.classList.toggle('open');
      });
      hamburger.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          hamburger.click();
        }
      });
    }

    // Build Hero section HTML
    function createHero(heroData) {
      const section = document.createElement('section');
      section.id = 'hero';
      section.classList.add('hero');
      section.setAttribute('role', 'banner');
      section.style.background = `url('${heroData.backgroundImage}') no-repeat center center/cover`;

      section.innerHTML = `
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <h1>${heroData.title}</h1>
          <p>${heroData.text}</p>
          <button id="heroBtn" aria-label="${heroData.button.label}">${heroData.button.label}</button>
        </div>
      `;
      return section;
    }

    // Build About section
    function createAbout(about) {
      const section = document.createElement('section');
      section.id = 'about';
      section.setAttribute('aria-labelledby', 'about-title');

      let paragraphs = about.paragraphs.map(p => `<p>${p}</p>`).join('');

      section.innerHTML = `
        <h2 id="about-title">${about.title}</h2>
        <div class="about-content">
          <div class="about-text">${paragraphs}</div>
          <div class="about-image">
            <img src="${about.image.src}" alt="${about.image.alt}" />
          </div>
        </div>
      `;
      return section;
    }

    // Build Menu section
    function createMenu(menu) {
      const section = document.createElement('section');
      section.id = 'menu';
      section.setAttribute('aria-labelledby', 'menu-title');

      let itemsHTML = menu.items.map(item => `
        <article class="menu-item" role="listitem" tabindex="0">
          <img src="${item.img}" alt="${item.alt}">
          <div class="menu-content">
            <h3>${item.name}</h3>
            <p>${item.description}</p>
            <div class="price">${item.price}</div>
          </div>
        </article>
      `).join('');

      section.innerHTML = `
        <h2 id="menu-title">${menu.title}</h2>
        <div class="menu-grid" role="list">${itemsHTML}</div>
      `;
      return section;
    }

    // Build Testimonials section
    function createTestimonials(testimonials) {
      const section = document.createElement('section');
      section.id = 'testimonials';
      section.setAttribute('aria-labelledby', 'testimonials-title');

      let reviewsHTML = testimonials.reviews.map(review => `
        <blockquote class="testimonial-card" tabindex="0">
          <p class="testimonial-text">"${review.text}"</p>
          <footer class="testimonial-author">— ${review.author}</footer>
        </blockquote>
      `).join('');

      section.innerHTML = `
        <h2 id="testimonials-title">${testimonials.title}</h2>
        <div class="testimonials">${reviewsHTML}</div>
      `;
      return section;
    }

    // Build Contact section
    function createContact(contact) {
      const section = document.createElement('section');
      section.id = 'contact';
      section.setAttribute('aria-labelledby', 'contact-title');

      section.innerHTML = `
        <h2 id="contact-title">${contact.title}</h2>
        <p class="contact-info">
          ${contact.info.address}<br />
          Phone: ${contact.info.phone}<br />
          Email: <a href="mailto:${contact.info.email}">${contact.info.email}</a>
        </p>
        <form class="contact-form" id="contactForm" aria-describedby="contact-response" novalidate>
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" required aria-required="true" aria-describedby="nameError" />
          <span id="nameError" class="visually-hidden" aria-live="polite"></span>

          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" required aria-required="true" aria-describedby="emailError" />
          <span id="emailError" class="visually-hidden" aria-live="polite"></span>

          <label for="message">Your Message</label>
          <textarea id="message" name="message" rows="4" required aria-required="true" aria-describedby="messageError"></textarea>
          <span id="messageError" class="visually-hidden" aria-live="polite"></span>

          <button type="submit">Send Message</button>
          <div id="contact-response" class="contact-confirmation" role="alert" aria-live="polite"></div>
        </form>
      `;
      return section;
    }

    // Build social links footer
    function buildSocialLinks(socialLinks) {
      const container = document.querySelector('.social-links');
      socialLinks.forEach(link => {
        const a = document.createElement('a');
        a.href = link.href;
        a.setAttribute('aria-label', link.label);
        a.setAttribute('role', 'link');
        a.innerHTML = link.icon;
        a.tabIndex = 0;
        container.appendChild(a);
      });
    }

    // Insert content into main
    function buildPageContent(data) {
      const main = document.getElementById('mainContent');

      main.appendChild(createHero(data.sections.hero));
      main.appendChild(createAbout(data.sections.about));
      main.appendChild(createMenu(data.sections.menu));
      main.appendChild(createTestimonials(data.sections.testimonials));
      main.appendChild(createContact(data.sections.contact));
    }

    // Contact Form Validation & submit simulation
    function initContactForm() {
      const contactForm = document.getElementById('contactForm');
      const contactResponse = document.getElementById('contact-response');

      contactForm.addEventListener('submit', e => {
        e.preventDefault();

        contactResponse.style.display = 'none';
        contactResponse.textContent = '';

        const name = contactForm.name.value.trim();
        const email = contactForm.email.value.trim();
        const message = contactForm.message.value.trim();
        let valid = true;

        function setError(fieldId, msg) {
          const errorSpan = document.getElementById(fieldId + 'Error');
          errorSpan.textContent = msg;
          errorSpan.classList.remove('visually-hidden');
          valid = false;
        }
        function clearError(fieldId) {
          const errorSpan = document.getElementById(fieldId + 'Error');
          errorSpan.textContent = '';
          errorSpan.classList.add('visually-hidden');
        }

        clearError('name');
        clearError('email');
        clearError('message');

        if (name.length < 2) setError('name', 'Please enter at least 2 characters.');
        if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) setError('email', 'Please enter a valid email address.');
        if (message.length < 10) setError('message', 'Message must be at least 10 characters.');

        if (!valid) {
          contactResponse.style.display = 'block';
          contactResponse.className = 'contact-confirmation contact-error';
          contactResponse.textContent = 'Please fix errors above and try again.';
          return;
        }

        contactResponse.style.display = 'block';
        contactResponse.className = 'contact-confirmation contact-success';
        contactResponse.textContent = 'Thank you for reaching out! We will get back to you soon.';

        contactForm.reset();
      });
    }

    // Add hero button scroll event
    function initHeroButton(targetId) {
      const heroBtn = document.getElementById('heroBtn');
      heroBtn.addEventListener('click', () => {
        const target = document.getElementById(targetId);
        if (target) {
          target.scrollIntoView({behavior: 'smooth'});
          if (targetId === 'contact') {
            document.getElementById('name').focus();
          }
        }
      });
    }

    // Intersection Observer for animating sections on scroll
    function initSectionAnimations() {
      const observerOptions = {
        threshold: 0.1,
      };
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      document.querySelectorAll('section').forEach(section => {
        observer.observe(section);
      });
    }

    // Build footer copyright
    function buildFooter(text) {
      document.getElementById('footerCopyright').innerHTML = text;
    }

    // Initialize with fetched data
    function initWithData(siteData) {
      applyColors(siteData.colors);
      buildNav(siteData.navLinks);
      buildPageContent(siteData);
      buildSocialLinks(siteData.socialLinks);
      buildFooter(siteData.footerCopy);
      initHeroButton(siteData.sections.hero.button.target);
      initContactForm();

      setTimeout(() => initSectionAnimations(), 100);
    }

    // Fetch JSON and initialize website
    fetch('siteData.json')
      .then(response => response.json())
      .then(data => {
        initWithData(data);
      })
      .catch(err => {
        console.error('Failed to load site data:', err);
      });
  </script>

</body>
</html>
